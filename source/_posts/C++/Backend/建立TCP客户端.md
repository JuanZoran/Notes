---
title: 建立TCP客户端
date: 2023-03-31 23:15:57
categories:
    - C++
    - 后端学习
tags:
    - C++
    - 后端
    - 编程学习
---

# 使用 Socket 定义的 api 创建一个基本的客户端

## 目录

### 创建一个 socket

-   同客户端相同，使用 socket 函数返回一个 SOCKET 对象

    -   返回值：SOCKET 对象

    -   参数 1：IP 协议

    -   参数 2：SOCKET 数据流种类

    -   参数 3：网络协议

        > 客户端可以不用声明网络协议，直接填写 NULL 也可以

### 连接服务器 connect

-   使用 connect 函数和服务端服务器进行连接

    -   返回值：连接是否成功的状态

        > 失败返回 0，建议使用宏定义

    -   参数 1：SOCKET 对象

        > 传入当前程序的 SOCKET 接口，也就是第一步创建的 socket 对象

    -   参数 2：IP 数据信息

        > 创建 sockaddr_in 对象，并且设置服务器的 ip 地址和端口号以及 IP 协议的信息

    -   参数 3：IP 数据报的长度

        > 传入 sizeof（IP 数据信息类型的长度）即可

### 接收服务器信息 recv
-   使用 recv 函数接受服务端返回的数据

    -   返回值：返回数据的长度

        > 同样的，当返回数据的长度为 NULL(0)时，说明未接收到信息

    -   参数 1：当前进程的 SOCKET 对象

    -   参数 2：用于接收返回信息的**const char\***的指针

    -   参数 3：接收指针所能接收的最大字节数

### 关闭 SOCKET

-   使用 closesocket 函数关闭当前进程的 socket
    -   参数 1：需要关闭的 socket
